function userAdministration(){function e(){var e=$("#user-modal");e.removeClass("hide"),e.addClass("fade-in"),$("#user-modal .modal-close").on("click",function(){e.addClass("hide"),e.removeClass("fade-in"),e.find("input").val(""),e.find("select").val(""),e.find("select").selectpicker("render")}),s(),t(e),a(),i()}function t(e){e.find("form").on("submit",function(e){e.preventDefault(),AjaxHandler.request({method:"POST",cache:!1,url:$(this).attr("action"),data:$(this).serializeObject(),success:function(e){s()}})})}function s(){function e(e){console.log(e);for(var t=0;t<e.items.length;t++){var s=$("#user-modal table.userlist tbody");s.append('<tr><td class="id">'+e.items[t].id+'</td><td class="id">'+e.items[t].email+'</td><td class="id">'+e.items[t].firstName+'</td><td class="id">'+e.items[t].lastName+'</td><td class="id">'+e.items[t].companyName+'</td><td class="id">'+e.items[t].roles+'</td><td class="id"><button type="button" class="btn btn-default edit-user" data-id="'+e.items[t].id+'" aria-label="Left Align"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button><button type="button" class="btn btn-red delete-user" data-id="'+e.items[t].id+'" aria-label="Left Align"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button></td></tr>')}}AjaxHandler.request({method:"GET",cache:!1,url:"users",data:$(this).serialize(),success:function(t){var s=$("#user-modal table.userlist tbody");s.empty(),e(t)}})}function a(){$("body").on("click",".delete-user",function(){var e=$(this).data("id");AjaxHandler.request({method:"DELETE",cache:!1,url:"users/"+e,data:$(this).serialize(),success:function(e){var t=$("#user-modal table.userlist tbody");t.empty(),s()}})})}function i(){function e(e){$("#user-modal").find(".edit-user").on("submit",function(t){t.preventDefault(),AjaxHandler.request({method:"PUT",cache:!1,url:$(this).attr("action")+"/"+e,data:$(this).serializeObject(),success:function(e){$("#user-modal").find(".add-user").addClass("hide");var t=$("#user-modal").find(".edit-user"),a=$("#user-modal").find(".add-user");t.addClass("hide"),a.removeClass("hide"),s()},error:function(e){console.log(e)}})})}$("body").on("click",".edit-user",function(){var t=$(this).data("id");console.log(t),AjaxHandler.request({method:"GET",cache:!1,url:"users/"+t,data:$(this).serializeObject(),success:function(t){$("#user-modal").find(".add-user").addClass("hide");var s=$("#user-modal").find(".edit-user");s.removeClass("hide"),s.find("#id").val(t.id),s.find("#email").val(t.email),s.find("#firstname").val(t.firstName),s.find("#lastname").val(t.lastName),s.find("#companyname").val(t.companyName),s.find("select").val(t.roles),s.find("select").selectpicker("render"),e(t.id)}})})}$("body").on("click","#useradmin-link",function(t){e()})}